<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é…ç½®æ–‡ä»¶æ ¼å¼åˆ†æå·¥å…·</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 30px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .analysis-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #007bff;
        }
        .error-section {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #dc3545;
        }
        .success-section {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #28a745;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 5px;
        }
        button:hover {
            background: #0056b3;
        }
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .char-analysis {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” é…ç½®æ–‡ä»¶æ ¼å¼åˆ†æå·¥å…·</h1>
        
        <button onclick="analyzeRawData()">ğŸ“Š åˆ†æåŸå§‹æ•°æ®</button>
        <button onclick="tryDifferentDecoding()">ğŸ”§ å°è¯•ä¸åŒè§£ç æ–¹æ³•</button>
        <button onclick="generateTestConfig()">ğŸ§ª ç”Ÿæˆæµ‹è¯•é…ç½®</button>

        <div id="results"></div>
    </div>

    <script>
        // å®é™…çš„é…ç½®æ–‡ä»¶æ•°æ®ï¼ˆä»PowerShellè¾“å‡ºå¤åˆ¶ï¼‰
        const RAW_CONFIG_DATA = `# ENCRYPTED CONFIGURATION DATA - DO NOT EDIT MANUALLY
# Use decrypt function to read content
]6E3OWXxPjsrgKUzf}ryO5Q}ep\\wf5ox]6Yv\\[MsgKnw\\Z<kdV4o\\[Q3g[P|Op<z]Z8kdV8khqY|]V8me53ye6EoepIsO6Mof6EyeqQof}<kfJnwgpY|f5oyem3|PGL4OWD3OWD{O[E|][]s][fNPJ\\3]JQm]GD7\\ZMpQGD8]JL3Q}f|QGQpPWP3PJH3QJTNFpgzgF34OmHNdKU3fKP9O|<mf58pO[Qsepg4eJI|d[U8OZIy\\Znw]ZI}gKY}Pl8yfJYx\\Znx\\[s4fpXx\\5<wO5<z]Z8kdV<|][Qze58}][P2\\[EsO[]ofqQse57<PmD|QV3zQF3zPV4zfpY5dZY6FmEpQJUm\\5TzRJIl]mTzRZUlQGf6PmT}]mH}QGEkQGUnFjsqfKTwQTsrgKUzf}ryO5Q}ep\\wf5ox]6Yv\\[MsgKnw\\Z<kdV4o\\[Q3g[P|Op<z]Z8kdV8khqY|]V8me53ye6EoepIsO5UofJ{yhZ4oeqU}O5gzgF34O5Qr\\[Ty\\5<wfJ{ogJoyeqP2\\[EsO[]ofqQse57<PmD|QV3zPV3zPV4zfpY5dZY6FmEpQJUm\\5TzRJIl]mTzRZUlQGf6PmT}]mH}QGEkQGUnFjsyQF4wdZ8sFpk3gKE}Rl;y\\6Qx]l4}dZ8qgZ{kfpo3hV4ke5IsOZYkf6U4f}Lxe6EoepIsOpI9g[MoOpQyeV<yfJYx\\Zny]JYzeJ<8eZYxgKPye}TweZoxdV<mdJI3O5Qye[Ev][Use58}S5IzdV45][M}dZ<xSWLzPmXwPGHwPGHwfKMogpoogzrz]mUn\\5QnPGkk\\p\\3PGon\\mT6Q}L3P5\\{P}Tz\\WT3]DrNe}HweZoxdTsrgKUzf}ryO5Q}ep\\wf5ox]6Yv\\[MsgKnw\\Z<kdV4o\\[Q3g[P|Op<z]Z8kdV8khqY|]V8me53ye6EoepIsO5UofJ{yhZ4oeqU}O5;{OZ4sepny\\5kkgF<me54zeJY3dZ<xf}<kfJnwgpY|f5oyem3|PGL4OWD{OWD{O[E|][]s][f@`;

        function analyzeRawData() {
            const resultsDiv = document.getElementById('results');
            
            // æ¸…ç†æ•°æ®ï¼ˆç§»é™¤æ³¨é‡Šï¼‰
            const cleanedData = RAW_CONFIG_DATA
                .split('\n')
                .filter(line => !line.startsWith('#') && line.trim())
                .join('');
            
            console.log('åŸå§‹æ•°æ®é•¿åº¦:', RAW_CONFIG_DATA.length);
            console.log('æ¸…ç†åæ•°æ®é•¿åº¦:', cleanedData.length);
            console.log('æ¸…ç†åæ•°æ®:', cleanedData);
            
            // å­—ç¬¦åˆ†æ
            const charCounts = {};
            const specialChars = [];
            
            for (let i = 0; i < cleanedData.length; i++) {
                const char = cleanedData[i];
                const code = char.charCodeAt(0);
                
                charCounts[char] = (charCounts[char] || 0) + 1;
                
                // æ”¶é›†éæ ‡å‡†Base64å­—ç¬¦
                if (!/[A-Za-z0-9+/=]/.test(char)) {
                    specialChars.push({ char, code, position: i });
                }
            }
            
            const uniqueChars = Object.keys(charCounts).sort();
            const base64Chars = uniqueChars.filter(c => /[A-Za-z0-9+/=]/.test(c));
            const nonBase64Chars = uniqueChars.filter(c => !/[A-Za-z0-9+/=]/.test(c));
            
            resultsDiv.innerHTML = `
                <div class="analysis-section">
                    <h3>ğŸ“Š åŸå§‹æ•°æ®åˆ†æ</h3>
                    <div class="char-analysis">
                        <p><strong>æ€»é•¿åº¦:</strong> ${RAW_CONFIG_DATA.length} å­—ç¬¦</p>
                        <p><strong>æ¸…ç†åé•¿åº¦:</strong> ${cleanedData.length} å­—ç¬¦</p>
                        <p><strong>å”¯ä¸€å­—ç¬¦æ•°:</strong> ${uniqueChars.length}</p>
                        <p><strong>Base64å­—ç¬¦æ•°:</strong> ${base64Chars.length}</p>
                        <p><strong>éBase64å­—ç¬¦æ•°:</strong> ${nonBase64Chars.length}</p>
                    </div>
                </div>
                
                <div class="analysis-section">
                    <h3>ğŸ”¤ å­—ç¬¦åˆ†å¸ƒ</h3>
                    <div class="char-analysis">
                        <p><strong>æ ‡å‡†Base64å­—ç¬¦:</strong></p>
                        <pre>${base64Chars.join('')}</pre>
                        <p><strong>éBase64å­—ç¬¦:</strong></p>
                        <pre>${nonBase64Chars.map(c => `'${c}' (${c.charCodeAt(0)})`).join(', ')}</pre>
                    </div>
                </div>
                
                <div class="analysis-section">
                    <h3>ğŸ” ç‰¹æ®Šå­—ç¬¦ä½ç½®ï¼ˆå‰20ä¸ªï¼‰</h3>
                    <pre>${specialChars.slice(0, 20).map(s => `ä½ç½®${s.position}: '${s.char}' (ASCII: ${s.code})`).join('\n')}</pre>
                </div>
                
                <div class="analysis-section">
                    <h3>ğŸ“ æ¸…ç†åæ•°æ®ï¼ˆå‰200å­—ç¬¦ï¼‰</h3>
                    <pre>${cleanedData.substring(0, 200)}</pre>
                </div>
            `;
        }

        function tryDifferentDecoding() {
            const resultsDiv = document.getElementById('results');
            
            // æ¸…ç†æ•°æ®
            const cleanedData = RAW_CONFIG_DATA
                .split('\n')
                .filter(line => !line.startsWith('#') && line.trim())
                .join('');
            
            const results = [];
            
            // æ–¹æ³•1ï¼šç›´æ¥å­—ç¬¦åç§»è§£ç ï¼ˆä¸ä½¿ç”¨Base64ï¼‰
            try {
                let method1 = '';
                for (let i = 0; i < cleanedData.length; i++) {
                    method1 += String.fromCharCode(cleanedData.charCodeAt(i) - 3);
                }
                results.push({
                    method: 'æ–¹æ³•1: ç›´æ¥å­—ç¬¦åç§»-3',
                    success: true,
                    result: method1.substring(0, 200),
                    length: method1.length
                });
            } catch (e) {
                results.push({
                    method: 'æ–¹æ³•1: ç›´æ¥å­—ç¬¦åç§»-3',
                    success: false,
                    error: e.message
                });
            }
            
            // æ–¹æ³•2ï¼šå°è¯•ä¸åŒçš„åç§»é‡
            for (let offset = 1; offset <= 10; offset++) {
                try {
                    let decoded = '';
                    for (let i = 0; i < Math.min(cleanedData.length, 100); i++) {
                        decoded += String.fromCharCode(cleanedData.charCodeAt(i) - offset);
                    }
                    
                    // æ£€æŸ¥æ˜¯å¦åŒ…å«å¯è¯»æ–‡æœ¬
                    const hasReadableText = /[a-zA-Z]{3,}/.test(decoded);
                    
                    results.push({
                        method: \`æ–¹æ³•2: å­—ç¬¦åç§»-\${offset}\`,
                        success: true,
                        result: decoded.substring(0, 100),
                        hasReadable: hasReadableText,
                        length: decoded.length
                    });
                } catch (e) {
                    results.push({
                        method: \`æ–¹æ³•2: å­—ç¬¦åç§»-\${offset}\`,
                        success: false,
                        error: e.message
                    });
                }
            }
            
            // æ–¹æ³•3ï¼šå°è¯•æ›¿æ¢ç‰¹æ®Šå­—ç¬¦åBase64è§£ç 
            try {
                // æ›¿æ¢åæ–œæ ç­‰ç‰¹æ®Šå­—ç¬¦
                let fixedData = cleanedData
                    .replace(/\\\\/g, '')
                    .replace(/\\[/g, '[')
                    .replace(/\\]/g, ']')
                    .replace(/[{}|<>]/g, '');
                
                // è¡¥é½Base64å¡«å……
                while (fixedData.length % 4 !== 0) {
                    fixedData += '=';
                }
                
                const base64Decoded = atob(fixedData);
                let method3 = '';
                for (let i = 0; i < base64Decoded.length; i++) {
                    method3 += String.fromCharCode(base64Decoded.charCodeAt(i) - 3);
                }
                
                results.push({
                    method: 'æ–¹æ³•3: ä¿®å¤åBase64+åç§»',
                    success: true,
                    result: method3.substring(0, 200),
                    length: method3.length
                });
            } catch (e) {
                results.push({
                    method: 'æ–¹æ³•3: ä¿®å¤åBase64+åç§»',
                    success: false,
                    error: e.message
                });
            }
            
            // æ˜¾ç¤ºç»“æœ
            let html = '<div class="analysis-section"><h3>ğŸ”§ ä¸åŒè§£ç æ–¹æ³•æµ‹è¯•ç»“æœ</h3>';
            
            results.forEach(result => {
                if (result.success) {
                    const isPromising = result.hasReadable || result.result.includes('model:') || result.result.includes('endpoint') || result.result.includes('api');
                    const sectionClass = isPromising ? 'success-section' : 'analysis-section';
                    
                    html += `
                        <div class="${sectionClass}">
                            <h4>${result.method} âœ…</h4>
                            <p><strong>é•¿åº¦:</strong> ${result.length}</p>
                            ${result.hasReadableText ? '<p><strong>åŒ…å«å¯è¯»æ–‡æœ¬:</strong> æ˜¯</p>' : ''}
                            <p><strong>é¢„è§ˆ:</strong></p>
                            <pre>${result.result}</pre>
                        </div>
                    `;
                } else {
                    html += \`
                        <div class="error-section">
                            <h4>\${result.method} âŒ</h4>
                            <p><strong>é”™è¯¯:</strong> \${result.error}</p>
                        </div>
                    \`;
                }
            });
            
            html += '</div>';
            resultsDiv.innerHTML = html;
        }

        function generateTestConfig() {
            const resultsDiv = document.getElementById('results');
            
            // åˆ›å»ºä¸€ä¸ªæµ‹è¯•é…ç½®
            const testConfig = \`[model:gpt-5.2]
endpoint=https://test-endpoint.openai.azure.com/openai/deployments/gpt-5-2/chat/completions?api-version=2023-12-01-preview
apiKey=test-api-key-12345
maxTokens=4000

[model:gpt-5.1]
endpoint=https://test-endpoint.openai.azure.com/openai/deployments/gpt-5-1/chat/completions?api-version=2023-12-01-preview
apiKey=test-api-key-67890
maxTokens=4000\`;
            
            // ä½¿ç”¨å­—ç¬¦åç§»+3åŠ å¯†
            let encrypted = '';
            for (let i = 0; i < testConfig.length; i++) {
                encrypted += String.fromCharCode(testConfig.charCodeAt(i) + 3);
            }
            
            // Base64ç¼–ç 
            const base64Encrypted = btoa(encrypted);
            
            resultsDiv.innerHTML = \`
                <div class="success-section">
                    <h3>ğŸ§ª æµ‹è¯•é…ç½®ç”Ÿæˆ</h3>
                    <h4>åŸå§‹é…ç½®:</h4>
                    <pre>\${testConfig}</pre>
                    
                    <h4>åŠ å¯†åçš„é…ç½®:</h4>
                    <pre>\${base64Encrypted}</pre>
                    
                    <h4>éªŒè¯è§£å¯†:</h4>
                    <button onclick="verifyTestConfig('\${base64Encrypted}')">ğŸ” éªŒè¯è§£å¯†</button>
                </div>
            \`;
        }

        function verifyTestConfig(encryptedConfig) {
            try {
                // Base64è§£ç 
                const base64Decoded = atob(encryptedConfig);
                
                // å­—ç¬¦åç§»è§£å¯†
                let decrypted = '';
                for (let i = 0; i < base64Decoded.length; i++) {
                    decrypted += String.fromCharCode(base64Decoded.charCodeAt(i) - 3);
                }
                
                // è§£æé…ç½®
                const configs = {};
                const sections = decrypted.split('[model:').slice(1);
                
                sections.forEach(section => {
                    const lines = section.split('\\n');
                    const modelName = lines[0].replace(']', '').trim();
                    
                    const config = {};
                    lines.slice(1).forEach(line => {
                        if (line.includes('=')) {
                            const [key, value] = line.split('=').map(s => s.trim());
                            if (key && value) {
                                config[key] = value;
                            }
                        }
                    });
                    
                    if (config.endpoint && config.apiKey) {
                        configs[modelName] = config;
                    }
                });
                
                alert(\`è§£å¯†éªŒè¯æˆåŠŸï¼\\næ‰¾åˆ° \${Object.keys(configs).length} ä¸ªæ¨¡å‹é…ç½®: \${Object.keys(configs).join(', ')}\`);
                
            } catch (error) {
                alert(\`è§£å¯†éªŒè¯å¤±è´¥: \${error.message}\`);
            }
        }

        console.log('é…ç½®æ–‡ä»¶æ ¼å¼åˆ†æå·¥å…·åŠ è½½å®Œæˆ');
    </script>
</body>
</html>