<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·å…´è¶£æ™ºèƒ½åˆ†æå¹³å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .main-content {
            padding: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 25px;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            background: #f8f9fa;
        }

        .section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
        }

        select, textarea, button {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
        }

        select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        button {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
            width: auto;
            min-width: 120px;
        }

        button:hover {
            background: linear-gradient(135deg, #2980b9 0%, #21618c 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #7f8c8d 0%, #6c7b7d 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #229954 0%, #1e8449 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        }

        .btn-warning:hover {
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
        }

        .data-textarea {
            min-height: 200px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
        }

        .output-section {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .output-section h3 {
            color: #ecf0f1;
            border-bottom: 2px solid #3498db;
            margin-bottom: 20px;
        }

        .output-content {
            background: #34495e;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #4a5f7a;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #3498db;
        }

        .loading::after {
            content: "â³ åˆ†æä¸­...";
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-ready { background-color: #27ae60; }
        .status-loading { background-color: #f39c12; }
        .status-error { background-color: #e74c3c; }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .prompt-preview {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 12px;
            color: #2c3e50;
            max-height: 150px;
            overflow-y: auto;
            border-left: 4px solid #3498db;
        }

        .result-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .summary-card {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .summary-card h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .summary-card p {
            color: #34495e;
            font-size: 14px;
            line-height: 1.5;
        }

        .interest-item {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }

        .interest-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .interest-name {
            font-size: 1.2em;
            font-weight: 600;
            color: #2c3e50;
        }

        .interest-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .meta-badge {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .interest-rationale {
            background: #ecf0f1;
            padding: 12px;
            border-radius: 6px;
            font-style: italic;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .interest-keywords {
            margin-bottom: 10px;
        }

        .keyword-tag {
            display: inline-block;
            background: #95a5a6;
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.75em;
            margin: 2px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            button {
                width: 100%;
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ç”¨æˆ·å…´è¶£æ™ºèƒ½åˆ†æå¹³å°</h1>
            <p>åŸºäºè¡Œä¸ºæ•°æ®çš„ä¸“ä¸šçº§å…´è¶£ç”»åƒåˆ†æç³»ç»Ÿ</p>
        </div>

        <div class="main-content">
            <!-- ç”¨æˆ·é€‰æ‹©åŒºåŸŸ -->
            <div class="section">
                <h3><span class="status-indicator status-ready"></span>æ­¥éª¤ 1: é€‰æ‹©ç”¨æˆ·</h3>
                <div class="form-group">
                    <label for="userSelect">é€‰æ‹©ç”¨æˆ·IDï¼š</label>
                    <select id="userSelect">
                        <option value="">-- è¯·é€‰æ‹©ç”¨æˆ· --</option>
                        <option value="user1">User1</option>
                    </select>
                </div>
                <button id="getUserBehaviorBtn" onclick="getUserBehavior()" disabled>è·å–ç”¨æˆ·è¡Œä¸ºæ•°æ®</button>
            </div>

            <!-- æ•°æ®ç¼–è¾‘åŒºåŸŸ -->
            <div class="section" id="dataSection" style="display: none;">
                <h3><span class="status-indicator status-ready"></span>æ­¥éª¤ 2: ç¼–è¾‘ç”¨æˆ·æ•°æ®</h3>
                <div class="form-group">
                    <label for="userData">ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼š</label>
                    <textarea id="userData" class="data-textarea" placeholder="ç”¨æˆ·æ•°æ®å°†åœ¨è¿™é‡Œæ˜¾ç¤º..."></textarea>
                </div>
                <div class="button-group">
                    <button id="editBtn" onclick="toggleEdit()">ç¼–è¾‘æ•°æ®</button>
                    <button id="saveBtn" onclick="saveData()" style="display: none;" class="btn-success">ä¿å­˜æ•°æ®</button>
                    <button id="cancelBtn" onclick="cancelEdit()" style="display: none;" class="btn-secondary">å–æ¶ˆç¼–è¾‘</button>
                </div>
            </div>

            <!-- æç¤ºé€‰æ‹©å’Œè¿è¡ŒåŒºåŸŸ -->
            <div class="section" id="promptSection" style="display: none;">
                <h3><span class="status-indicator status-ready"></span>æ­¥éª¤ 3: é…ç½®AIæœåŠ¡</h3>
                
                <!-- APIé…ç½®åŒºåŸŸ -->
                <div class="form-group">
                    <label for="aiProvider">é€‰æ‹©AIæ¨¡å‹ï¼š</label>
                    <select id="aiProvider">
                        <option value="">-- è¯·é€‰æ‹©AIæ¨¡å‹ --</option>
                        <option value="gpt-5.2">GPT-5.2</option>
                        <option value="gpt-5.1">GPT-5.1</option>
                        <option value="gpt-5">GPT-5</option>
                        <option value="o4-mini">O4-Mini</option>
                        <option value="o1-mini">O1-Mini</option>
                        <option value="local">æœ¬åœ°æ¨¡æ‹Ÿï¼ˆæµ‹è¯•ç”¨ï¼‰</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="promptSelect">é€‰æ‹©åˆ†ææ–¹æ³•ï¼š</label>
                    <select id="promptSelect">
                        <option value="">-- è¯·é€‰æ‹©åˆ†ææ–¹æ³• --</option>
                        <option value="userInterestIntelligence">ç”¨æˆ·å…´è¶£æ™ºèƒ½åˆ†æ</option>
                    </select>
                </div>
                
                <!-- æç¤ºé¢„è§ˆåŒºåŸŸ -->
                <div id="promptPreview" style="display: none;">
                    <h4>åˆ†ææ–¹æ³•é¢„è§ˆï¼š</h4>
                    <div class="prompt-preview-box" style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 15px; max-height: 300px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 0.9em; line-height: 1.4; white-space: pre-wrap;"></div>
                </div>
                
                <!-- éšè—çš„æç¤ºæ•°æ®å­˜å‚¨ -->
                <textarea id="promptData" style="display: none;"></textarea>
                
                <div class="button-group">
                    <button id="runAnalysisBtn" onclick="runAnalysis()" disabled class="btn-warning">ğŸš€ è¿è¡Œåˆ†æ</button>
                </div>
            </div>

            <!-- åŠ è½½çŠ¶æ€ -->
            <div class="loading" id="loadingIndicator"></div>

            <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->
            <div class="output-section" id="outputSection" style="display: none;">
                <h3><span class="status-indicator status-ready"></span>User Profile</h3>
                <div class="result-summary" id="resultSummary"></div>
                <div class="interests-display" id="interestsDisplay"></div>
                <div class="output-content" id="outputContent" style="display: none;"></div>
                <button onclick="toggleRawOutput()" class="btn-secondary" style="margin-top: 15px;">Show/Hide Raw JSON</button>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿçš„ç”¨æˆ·æ•°æ®
        const userData = {
            "user1": `# INPUT CurrentDate
2026-01-14

# Input Daily User Behavior (2026-01-13)
UserId   Date   DetailedSource   Source   Action
User1    1/13/2026 12:00:00 AM   MSN View MSN   'Godfather of AI' says the technology will create massive unemployment and send profits soaring â€” 'that is the capitalist system'
User1    1/13/2026 12:00:00 AM   MSN View MSN   Cyclist sees kitten shivering on side of road, his next move saves her life
User1    1/13/2026 12:00:00 AM   BrowserEvents  Edge  'Godfather of AI' says the technology will create massive unemployment and send profits soaring â€” 'that is the capitalist system'

# INPUT Historical User Interest Profile (Up to 2026-01-12)
User Id  Market   From Date   To Date  Category    Sub Category   Keywords    Source   Weight   Duration
User1 en-us 2025-02-19  2026-01-11  Fashion & Style   Coats and Outerwear  Cinch-Waist Puffer, Frost Fall Hooded Jacket, Wunder Puff Jacket, Frost Fall Parka, Men's Wunder Puff Jacket, Water-Resistant Cropped Hooded Jacket, Ventilated Running Jacket, Down for It All Jacket, Wunder Puff Vest, Dance Studio Jogger   Uet   0.969109763210974 long-term
User1 en-us 2025-02-12  2026-01-11  Fashion & Style   Footwear Zuri Strappy Ballet Flat, Sam Edelman, Liona Bit Loafer, Dance Studio, Lucca Loafer, Women's Shoes, Merrell, Sam Edelman Lucca Loafer, McQueen Oversized Sneaker, Tory Burch Field Sneaker   Uet   0.954369690971561 long-term
User1 en-us 2025-09-27  2026-01-11  Fashion & Style   Makeup and Accessories  New Crew Backpack, Augustinus Bader, City Essentials Bag, Burberry 54mm Gradient Cat Eye Sunglasses, Fendi Fine 59mm Round Sunglasses, EstÃ©e Lauder, Everywhere Crossbody Bag, Sport Bottle, UA Studio Luna Shoulder Bag, Metal Aviator Sunglass   Uet   0.940856079579912 long-term
User1 en-us 2025-02-12  2026-01-07  Fashion & Style   Women's Fashion   Sam Edelman, Lucca Loafer, Loraine Bit Loafer, Atmos Rewards, Tempo Track Pant, Maeve Cocktail Tee, Shrunken Bennet Shirt, Tory Burch, Vince, Ted Baker  Uet   0.852432921917494 long-term
User1 en-us 2025-08-02  2026-01-08  Fashion & Style   Loungewear  Softstreme High-Rise Straight-Leg Pant, Relaxed-Fit Cotton T-Shirt, Scuba Hoodie, Dance Studio Pant, Beach Riot Cardigan, Graphic Sweater, Crewneck Sweatshirt, Cashmere Cardigan, Glazed Satin Long Pajama Set   Uet   0.848047116791127 long-term
User1 en-us 2026-01-09  2026-01-12  Technology  Cloud Computing   Azure ExP Studio, Analysis Hub, Azure Data Explorer   Edge  0.830496 long-term
User1 en-us 2025-10-05  2026-01-09  Travel & Attractions Air Travel  San JosÃ© Mineta Intl. Airport, Alaska Airlines, Flights, Flight Status  Edge  0.803908934176482 long-term
User1 en-us 2025-02-19  2026-01-04  Technology  Artificial Intelligence Elon Musk's Brain-Implant Company, Artificial Intelligence, AI, OpenAI, Copilot adoption, Copilot Adoption, AI Product, AI-generated headlines, Microsoft AI, ChatGPT   Edge, MSN   0.782687556682147 long-term
User1 en-us 2025-03-12  2026-01-09  Technology  Tech Companies Microsoft, Nvidia, Arm CEO, Broadcom, Apple, Google   Edge  0.771094234671253 long-term
User1 en-us 2025-12-12  2026-01-03  Business & Finance   Investment Firms  Fidelity Investments, Fidelity, Fidelity International   Uet, Bing, MSN 0.770218160923428 long-term`
        };

        // æ¨¡æ‹Ÿçš„æç¤ºæ•°æ®
        const prompts = {
            "user-interest-intelligence-prompt_testV1.md": `# ROLE
You are an expert in User Interest Intelligence, Behavioral Signal Analysis, and Demographic Profiling.
Your task is to synthesize one day's raw user behavior together with existing user interest signals into a concise, professional-grade Interest Profile suitable for downstream personalization, analytics, or modeling systems.

# INSTRUCTIONS
1. Interest Processing & Prioritization
2. Niche Spike Extraction
3. Duration Calculation
4. Rationale Analysis
5. Demographic Synthesis

# OUTPUT
Return ONLY valid, parseable JSON.`
        };
        
        // LLMæ¨¡å‹é…ç½®
        const modelConfigs = {
            openai: {
                models: {
                    'gpt-4': { name: 'GPT-4', description: 'æœ€å¼ºå¤§çš„æ¨¡å‹ï¼Œé€‚åˆå¤æ‚åˆ†æä»»åŠ¡', maxTokens: 4000 },
                    'gpt-4-turbo': { name: 'GPT-4 Turbo', description: 'æ›´å¿«çš„GPT-4ç‰ˆæœ¬ï¼Œæ€§ä»·æ¯”é«˜', maxTokens: 4000 },
                    'gpt-3.5-turbo': { name: 'GPT-3.5 Turbo', description: 'å¿«é€Ÿä¸”ç»æµçš„é€‰æ‹©', maxTokens: 2000 }
                }
            },
            claude: {
                models: {
                    'claude-3-opus-20240229': { name: 'Claude-3 Opus', description: 'æœ€å¼ºå¤§çš„Claudeæ¨¡å‹ï¼Œé€‚åˆå¤æ‚æ¨ç†', maxTokens: 4000 },
                    'claude-3-sonnet-20240229': { name: 'Claude-3 Sonnet', description: 'å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬çš„é€‰æ‹©', maxTokens: 4000 },
                    'claude-3-haiku-20240307': { name: 'Claude-3 Haiku', description: 'æœ€å¿«æœ€ç»æµçš„Claudeæ¨¡å‹', maxTokens: 2000 }
                }
            },
            gemini: {
                models: {
                    'gemini-pro': { name: 'Gemini Pro', description: 'å¼ºå¤§çš„å¤šæ¨¡æ€æ¨¡å‹', maxTokens: 2000 },
                    'gemini-pro-vision': { name: 'Gemini Pro Vision', description: 'æ”¯æŒå›¾åƒç†è§£çš„æ¨¡å‹', maxTokens: 2000 }
                }
            },
            'microsoft-internal': {
                models: {
                    'gpt-5.2': { name: 'GPT-5.2', description: 'æœ€æ–°çš„GPT-5.2æ¨¡å‹', maxTokens: 4000 },
                    'gpt-5.1': { name: 'GPT-5.1', description: 'GPT-5.1æ¨¡å‹', maxTokens: 4000 },
                    'gpt-5': { name: 'GPT-5', description: 'GPT-5åŸºç¡€æ¨¡å‹', maxTokens: 4000 },
                    'o4-mini': { name: 'O4-Mini', description: 'O4-Miniè½»é‡çº§æ¨¡å‹', maxTokens: 2000 },
                    'o1-mini': { name: 'O1-Mini', description: 'O1-Miniæ¨ç†æ¨¡å‹', maxTokens: 2000 }
                }
            },
            custom: {
                models: {
                    'custom-model': { name: 'Custom Model', description: 'è‡ªå®šä¹‰APIç«¯ç‚¹æ¨¡å‹', maxTokens: 2000 }
                }
            },
            local: {
                models: {
                    'mock-model': { name: 'æ¨¡æ‹Ÿæ¨¡å‹', description: 'ç”¨äºæµ‹è¯•çš„æœ¬åœ°æ¨¡æ‹Ÿ', maxTokens: 2000 }
                }
            }
        };

        let isEditing = false;
        let originalData = '';
        let isPromptEditing = false;
        let originalPromptData = '';

        // ç”¨æˆ·é€‰æ‹©å˜åŒ–
        document.getElementById('userSelect').addEventListener('change', function() {
            console.log('ç”¨æˆ·é€‰æ‹©å˜åŒ–:', this.value);
            const getUserBtn = document.getElementById('getUserBehaviorBtn');
            if (getUserBtn) {
                getUserBtn.disabled = !this.value;
                console.log('æŒ‰é’®çŠ¶æ€:', getUserBtn.disabled ? 'ç¦ç”¨' : 'å¯ç”¨');
            }
            
            if (!this.value) {
                document.getElementById('dataSection').style.display = 'none';
                const promptSection = document.getElementById('promptSection');
                if (promptSection) {
                    promptSection.style.display = 'none';
                }
                const outputSection = document.getElementById('outputSection');
                if (outputSection) {
                    outputSection.style.display = 'none';
                }
            }
        });

        // AIæœåŠ¡å•†é€‰æ‹©å˜åŒ–
        document.getElementById('aiProvider').addEventListener('change', function() {
            const apiKeySection = document.getElementById('apiKeySection');
            const modelSection = document.getElementById('modelSection');
            const customEndpointSection = document.getElementById('customEndpointSection');
            const modelSelect = document.getElementById('modelSelect');
            const modelInfo = document.getElementById('modelInfo');
            
            // æ˜¾ç¤º/éšè—APIå¯†é’¥è¾“å…¥
            if (this.value && this.value !== 'local') {
                apiKeySection.style.display = 'block';
            } else {
                apiKeySection.style.display = 'none';
            }
            
            // æ˜¾ç¤º/éšè—è‡ªå®šï¿½ï¿½ï¿½ç«¯ç‚¹è¾“å…¥
            if (this.value === 'custom' || this.value === 'microsoft-internal') {
                customEndpointSection.style.display = 'block';
                if (this.value === 'microsoft-internal') {
                    document.getElementById('customEndpoint').placeholder = 'ä¾‹å¦‚: https://internal-pyparus.microsoft.com/v1/chat/completions';
                } else {
                    document.getElementById('customEndpoint').placeholder = 'ä¾‹å¦‚: https://your-custom-api.com/v1/chat';
                }
            } else {
                customEndpointSection.style.display = 'none';
            }
            
            if (this.value) {
                modelSection.style.display = 'block';
                populateModelDropdown(this.value);
            } else {
                modelSection.style.display = 'none';
                modelSelect.innerHTML = '<option value="">-- è¯·å…ˆé€‰æ‹©AIæœåŠ¡å•† --</option>';
                modelInfo.innerHTML = '';
            }
            
            updateRunButton();
        });
        
        // å¡«å……æ¨¡å‹ä¸‹æ‹‰èœå•
        function populateModelDropdown(provider) {
            const modelSelect = document.getElementById('modelSelect');
            const models = modelConfigs[provider]?.models || {};
            
            modelSelect.innerHTML = '<option value="">-- è¯·é€‰æ‹©æ¨¡å‹ --</option>';
            
            Object.entries(models).forEach(([modelId, config]) => {
                const option = document.createElement('option');
                option.value = modelId;
                option.textContent = config.name;
                modelSelect.appendChild(option);
            });
            
            // é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªæ¨¡å‹
            const firstModel = Object.keys(models)[0];
            if (firstModel) {
                modelSelect.value = firstModel;
                updateModelInfo(provider, firstModel);
            }
        }
        
        // æ¨¡å‹é€‰æ‹©å˜åŒ–
        document.getElementById('modelSelect').addEventListener('change', function() {
            const provider = document.getElementById('aiProvider').value;
            updateModelInfo(provider, this.value);
            updateRunButton();
        });
        
        // æ›´æ–°æ¨¡å‹ä¿¡æ¯æ˜¾ç¤º
        function updateModelInfo(provider, modelId) {
            const modelInfo = document.getElementById('modelInfo');
            const config = modelConfigs[provider]?.models[modelId];
            
            if (config) {
                modelInfo.innerHTML = `
                    <strong>${config.name}</strong><br>
                    ${config.description}<br>
                    <small>æœ€å¤§è¾“å‡ºtokens: ${config.maxTokens.toLocaleString()}</small>
                `;
            } else {
                modelInfo.innerHTML = '';
            }
        }
        
        // æ›´æ–°è¿è¡ŒæŒ‰é’®çŠ¶æ€
        function updateRunButton() {
            const aiProvider = document.getElementById('aiProvider').value;
            const promptSelect = document.getElementById('promptSelect').value;
            const runBtn = document.getElementById('runAnalysisBtn');
            
            const isReady = promptSelect && aiProvider;
            runBtn.disabled = !isReady;
        }
        
        // APIå¯†é’¥è¾“å…¥å˜åŒ–
        document.getElementById('apiKey').addEventListener('input', updateRunButton);
        
        // è‡ªå®šä¹‰ç«¯ç‚¹è¾“å…¥å˜åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            const customEndpointInput = document.getElementById('customEndpoint');
            if (customEndpointInput) {
                customEndpointInput.addEventListener('input', updateRunButton);
            }
        });

        // æç¤ºé€‰æ‹©å˜åŒ–
        document.getElementById('promptSelect').addEventListener('change', function() {
            const preview = document.getElementById('promptPreview');
            const content = document.getElementById('promptContent');
            const editSection = document.getElementById('promptEditSection');
            const editBtn = document.getElementById('editPromptBtn');
            const promptData = document.getElementById('promptData');
            
            if (this.value) {
                preview.style.display = 'block';
                editSection.style.display = 'block';
                editBtn.style.display = 'inline-block';
                content.textContent = prompts[this.value].substring(0, 200) + '...';
                promptData.value = prompts[this.value];
                promptData.readOnly = true;
            } else {
                preview.style.display = 'none';
                editSection.style.display = 'none';
                editBtn.style.display = 'none';
            }
            
            updateRunButton();
        });

        // è·å–ç”¨æˆ·è¡Œä¸ºæ•°æ®
        function getUserBehavior() {
            console.log('getUserBehavior å‡½æ•°è¢«è°ƒç”¨');
            const userId = document.getElementById('userSelect').value;
            console.log('é€‰æ‹©çš„ç”¨æˆ·ID:', userId);
            
            if (!userId) {
                alert('è¯·å…ˆé€‰æ‹©ç”¨æˆ·ID');
                return;
            }

            console.log('å¼€å§‹è·å–ç”¨æˆ·æ•°æ®...');
            // æ¨¡æ‹ŸAPIè°ƒç”¨
            setTimeout(() => {
                console.log('æ¨¡æ‹ŸAPIè°ƒç”¨å®Œæˆ');
                const data = userData[userId];
                console.log('ç”¨æˆ·æ•°æ®:', data ? 'å·²æ‰¾åˆ°' : 'æœªæ‰¾åˆ°');
                
                if (data) {
                    document.getElementById('userData').value = data;
                    document.getElementById('dataSection').style.display = 'block';
                    
                    // æ˜¾ç¤ºAIé…ç½®åŒºåŸŸ
                    const promptSection = document.getElementById('promptSection');
                    if (promptSection) {
                        promptSection.style.display = 'block';
                        console.log('æ˜¾ç¤ºAIé…ç½®åŒºåŸŸ');
                    } else {
                        console.error('æ‰¾ä¸åˆ°promptSectionå…ƒç´ ');
                    }
                    
                    // æ»šåŠ¨åˆ°æ•°æ®åŒºåŸŸ
                    document.getElementById('dataSection').scrollIntoView({ behavior: 'smooth' });
                    console.log('æ•°æ®åŠ è½½å®Œæˆ');
                } else {
                    console.error('æœªæ‰¾åˆ°ç”¨æˆ·æ•°æ®');
                    alert('æœªæ‰¾åˆ°ç”¨æˆ·æ•°æ®');
                }
            }, 500);
        }

        // åˆ‡æ¢ç¼–è¾‘æ¨¡å¼
        function toggleEdit() {
            const textarea = document.getElementById('userData');
            const editBtn = document.getElementById('editBtn');
            const saveBtn = document.getElementById('saveBtn');
            const cancelBtn = document.getElementById('cancelBtn');

            if (!isEditing) {
                // è¿›å…¥ç¼–è¾‘æ¨¡å¼
                isEditing = true;
                originalData = textarea.value;
                textarea.readOnly = false;
                textarea.style.borderColor = '#f39c12';
                textarea.focus();
                
                editBtn.style.display = 'none';
                saveBtn.style.display = 'inline-block';
                cancelBtn.style.display = 'inline-block';
            }
        }

        // ä¿å­˜æ•°æ®
        function saveData() {
            const textarea = document.getElementById('userData');
            const editBtn = document.getElementById('editBtn');
            const saveBtn = document.getElementById('saveBtn');
            const cancelBtn = document.getElementById('cancelBtn');

            // é€€å‡ºç¼–è¾‘æ¨¡å¼
            isEditing = false;
            textarea.readOnly = true;
            textarea.style.borderColor = '#ddd';
            
            editBtn.style.display = 'inline-block';
            saveBtn.style.display = 'none';
            cancelBtn.style.display = 'none';

            alert('æ•°æ®å·²ä¿å­˜ï¼');
        }

        // å–æ¶ˆç¼–è¾‘
        function cancelEdit() {
            const textarea = document.getElementById('userData');
            const editBtn = document.getElementById('editBtn');
            const saveBtn = document.getElementById('saveBtn');
            const cancelBtn = document.getElementById('cancelBtn');

            // æ¢å¤åŸå§‹æ•°æ®
            textarea.value = originalData;
            
            // é€€å‡ºç¼–è¾‘æ¨¡å¼
            isEditing = false;
            textarea.readOnly = true;
            textarea.style.borderColor = '#ddd';
            
            editBtn.style.display = 'inline-block';
            saveBtn.style.display = 'none';
            cancelBtn.style.display = 'none';
        }

        // åˆ‡æ¢æç¤ºç¼–è¾‘æ¨¡å¼
        function togglePromptEdit() {
            const textarea = document.getElementById('promptData');
            const editBtn = document.getElementById('editPromptBtn');
            const saveBtn = document.getElementById('savePromptBtn');
            const cancelBtn = document.getElementById('cancelPromptBtn');

            if (!isPromptEditing) {
                // è¿›å…¥ç¼–è¾‘æ¨¡å¼
                isPromptEditing = true;
                originalPromptData = textarea.value;
                textarea.readOnly = false;
                textarea.style.borderColor = '#f39c12';
                textarea.focus();
                
                editBtn.style.display = 'none';
                saveBtn.style.display = 'inline-block';
                cancelBtn.style.display = 'inline-block';
            }
        }

        // ä¿å­˜æç¤º
        function savePrompt() {
            const textarea = document.getElementById('promptData');
            const editBtn = document.getElementById('editPromptBtn');
            const saveBtn = document.getElementById('savePromptBtn');
            const cancelBtn = document.getElementById('cancelPromptBtn');
            const promptSelect = document.getElementById('promptSelect');

            // æ›´æ–°æç¤ºæ•°æ®
            prompts[promptSelect.value] = textarea.value;
            
            // é€€å‡ºç¼–è¾‘æ¨¡å¼
            isPromptEditing = false;
            textarea.readOnly = true;
            textarea.style.borderColor = '#ddd';
            
            editBtn.style.display = 'inline-block';
            saveBtn.style.display = 'none';
            cancelBtn.style.display = 'none';

            alert('æç¤ºå·²ä¿å­˜ï¼');
        }

        // å–æ¶ˆæç¤ºç¼–è¾‘
        function cancelPromptEdit() {
            const textarea = document.getElementById('promptData');
            const editBtn = document.getElementById('editPromptBtn');
            const saveBtn = document.getElementById('savePromptBtn');
            const cancelBtn = document.getElementById('cancelPromptBtn');

            // æ¢å¤åŸå§‹æ•°æ®
            textarea.value = originalPromptData;
            
            // é€€å‡ºç¼–è¾‘æ¨¡å¼
            isPromptEditing = false;
            textarea.readOnly = true;
            textarea.style.borderColor = '#ddd';
            
            editBtn.style.display = 'inline-block';
            saveBtn.style.display = 'none';
            cancelBtn.style.display = 'none';
        }

        // è¿è¡Œåˆ†æ
        async function runAnalysis() {
            const userData = document.getElementById('userData').value;
            const promptSelect = document.getElementById('promptSelect').value;
            const promptData = document.getElementById('promptData').value;
            const selectedModel = document.getElementById('aiProvider').value; // ç°åœ¨aiProviderå°±æ˜¯æ¨¡å‹
            
            if (!userData || !promptSelect || !promptData || !selectedModel) {
                alert('è¯·ç¡®ä¿å·²é…ç½®æ‰€æœ‰å¿…è¦ä¿¡æ¯ï¼ŒåŒ…æ‹¬é€‰æ‹©æ¨¡å‹');
                return;
            }

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            const loading = document.getElementById('loadingIndicator');
            const outputSection = document.getElementById('outputSection');
            const loadingText = document.querySelector('.loading');
            
            loading.style.display = 'block';
            outputSection.style.display = 'none';
            loadingText.innerHTML = `ğŸ¤– æ­£åœ¨è°ƒç”¨ ${modelConfigs[selectedModel]?.name || selectedModel} è¿›è¡Œåˆ†æ...`;

            try {
                let analysisResult;
                if (selectedModel === 'local') {
                    // æœ¬åœ°æ¨¡æ‹Ÿ
                    await new Promise(resolve => setTimeout(resolve, 3000));
                    analysisResult = generateMockAnalysis();
                } else {
                    // çœŸå®AIè°ƒç”¨
                    analysisResult = await callGPTModels(promptData + '\n\n# USER DATA\n' + userData, selectedModel);
                }

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            const loading = document.getElementById('loadingIndicator');
            const outputSection = document.getElementById('outputSection');
            const loadingText = document.querySelector('.loading');
            
            loading.style.display = 'block';
            outputSection.style.display = 'none';
            loadingText.innerHTML = `ğŸ¤– æ­£åœ¨è°ƒç”¨ ${getProviderName(aiProvider)} (${modelConfigs[aiProvider]?.models[selectedModel]?.name}) è¿›è¡Œåˆ†æ...`;

            try {
                let analysisResult;
                
                if (aiProvider === 'local') {
                    // æœ¬åœ°æ¨¡æ‹Ÿ
                    await new Promise(resolve => setTimeout(resolve, 3000));
                    analysisResult = generateMockAnalysis();
                } else {
                    // çœŸå®AIè°ƒç”¨
                    analysisResult = await callRealAI(aiProvider, null, promptData, userData, selectedModel);
                }
                
                // éšè—åŠ è½½ï¼Œæ˜¾ç¤ºç»“æœ
                loading.style.display = 'none';
                outputSection.style.display = 'block';
                
                // æ˜¾ç¤ºç»“æœ
                displayResultSummary(analysisResult);
                displayIndividualInterests(analysisResult.Profile);
                document.getElementById('outputContent').textContent = JSON.stringify(analysisResult, null, 2);
                
                // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
                outputSection.scrollIntoView({ behavior: 'smooth' });
                
            } catch (error) {
                loading.style.display = 'none';
                alert(`åˆ†æå¤±è´¥: ${error.message}`);
            }
        }

        // ç”Ÿæˆæ¨¡æ‹Ÿåˆ†æç»“æœ
        function generateMockAnalysis() {
            return {
                "CurrentDate": "2026-01-14",
                "Demographic": "Professional technology-oriented individual with strong interest in AI and cloud computing, likely working in tech sector or data analytics. Demonstrates sophisticated fashion sense with focus on premium activewear and designer accessories, suggesting middle to upper-middle income bracket. Shows emerging interest in financial planning and wealth management, indicating career progression and financial awareness.",
                "Profile": [
                    {
                        "Name": "AI Employment Impact Analysis",
                        "Rationale": "User engaged with content about AI's impact on unemployment and capitalism, building on existing AI interest. This signals concern about technological disruption in the workplace and economic implications. User likely tracking how AI developments affect job security and economic systems.",
                        "Duration": "emerging",
                        "Lifecycle": "normal",
                        "Domain": "Technology > Artificial Intelligence",
                        "Keywords": ["Godfather of AI", "unemployment", "capitalism", "AI impact"],
                        "Intent": "stay_updated",
                        "FromDate": "2026-01-13",
                        "ToDate": "2026-01-13",
                        "Sources": ["MSN"],
                        "Weight": 0.8
                    },
                    {
                        "Name": "Premium Activewear Fashion",
                        "Rationale": "Long-term sustained interest in high-quality activewear brands like Lululemon. User demonstrates preference for functional yet stylish workout clothing, suggesting active lifestyle combined with fashion consciousness.",
                        "Duration": "stable",
                        "Lifecycle": "normal",
                        "Domain": "Fashion & Style > Activewear",
                        "Keywords": ["Dance Studio", "Varsity", "Crew Backpack", "lululemon"],
                        "Intent": "explore",
                        "FromDate": "2025-07-19",
                        "ToDate": "2026-01-03",
                        "Sources": ["Uet"],
                        "Weight": 0.704
                    }
                ]
            };
        }

        // æ˜¾ç¤ºç»“æœæ‘˜è¦
        function displayResultSummary(result) {
            const summaryContainer = document.getElementById('resultSummary');
            
            // äººå£ç»Ÿè®¡æ‘˜è¦
            const demoCard = document.createElement('div');
            demoCard.className = 'summary-card';
            demoCard.innerHTML = `
                <h4>ğŸ‘¤ User Profile</h4>
                <p>${result.Demographic}</p>
            `;
            
            // å…´è¶£æ•°é‡ç»Ÿè®¡
            const statsCard = document.createElement('div');
            statsCard.className = 'summary-card';
            const interestCount = result.Profile.length;
            const stableCount = result.Profile.filter(p => p.Duration === 'stable').length;
            const emergingCount = result.Profile.filter(p => p.Duration === 'emerging').length;
            
            statsCard.innerHTML = `
                <h4>ğŸ“Š Interest Statistics</h4>
                <p>Total Interests: ${interestCount}<br>
                Stable Interests: ${stableCount}<br>
                Emerging Interests: ${emergingCount}</p>
            `;
            
            // ä¸»è¦å…´è¶£é¢†åŸŸ
            const topInterests = result.Profile.slice(0, 2);
            const interestsCard = document.createElement('div');
            interestsCard.className = 'summary-card';
            interestsCard.innerHTML = `
                <h4>ğŸ¯ Main Interests</h4>
                <p>${topInterests.map(interest => 
                    `â€¢ ${interest.Name} (${interest.Intent})`
                ).join('<br>')}</p>
            `;
            
            // æ¸…ç©ºå¹¶æ·»åŠ æ–°å†…å®¹
            summaryContainer.innerHTML = '';
            summaryContainer.appendChild(demoCard);
            summaryContainer.appendChild(statsCard);
            summaryContainer.appendChild(interestsCard);
        }

        // æ˜¾ç¤ºä¸ªåˆ«å…´è¶£
        function displayIndividualInterests(interests) {
            const container = document.getElementById('interestsDisplay');
            container.innerHTML = '';

            interests.forEach((interest, index) => {
                const interestDiv = document.createElement('div');
                interestDiv.className = 'interest-item';
                
                interestDiv.innerHTML = `
                    <div class="interest-header">
                        <div class="interest-name">${interest.Name}</div>
                        <span class="meta-badge">Weight: ${interest.Weight.toFixed(3)}</span>
                    </div>
                    <div class="interest-meta">
                        <span class="meta-badge">${interest.Duration}</span>
                        <span class="meta-badge">${interest.Intent}</span>
                        <span class="meta-badge">${interest.Lifecycle}</span>
                        <span class="meta-badge">${interest.Domain}</span>
                    </div>
                    <div class="interest-rationale">
                        ${interest.Rationale}
                    </div>
                    <div class="interest-keywords">
                        <strong>Keywords:</strong> 
                        ${interest.Keywords.map(keyword => 
                            `<span class="keyword-tag">${keyword}</span>`
                        ).join('')}
                    </div>
                    <div style="font-size: 0.9em; color: #7f8c8d;">
                        <strong>Sources:</strong> ${interest.Sources.join(', ')} | 
                        <strong>Period:</strong> ${interest.FromDate} to ${interest.ToDate}
                    </div>
                `;
                
                container.appendChild(interestDiv);
            });
        }

        // åˆ‡æ¢åŸå§‹JSONæ˜¾ç¤º
        function toggleRawOutput() {
            const rawOutput = document.getElementById('outputContent');
            if (rawOutput.style.display === 'none') {
                rawOutput.style.display = 'block';
            } else {
                rawOutput.style.display = 'none';
            }
        }

        // è·å–æœåŠ¡å•†åç§°
        function getProviderName(provider) {
            const names = {
                'openai': 'OpenAI GPT',
                'claude': 'Anthropic Claude', 
                'gemini': 'Google Gemini',
                'local': 'æœ¬åœ°æ¨¡æ‹Ÿ'
            };
            return names[provider] || provider;
        }
        
        // è°ƒç”¨çœŸå®AIæœåŠ¡
        async function callRealAI(provider, apiKey, prompt, userData, model) {
            const fullPrompt = `${prompt}\n\n# USER DATA\n${userData}`;
            
            switch (provider) {
                case 'gpt-models':
                    return await callGPTModels(fullPrompt, model);
                default:
                    throw new Error('ä¸æ”¯æŒçš„AIæœåŠ¡å•†');
            }
        }
        
        // è§£å¯†é…ç½®æ–‡ä»¶
        function decryptConfig(encryptedContent) {
            try {
                // ç§»é™¤æ³¨é‡Šè¡Œ
                const lines = encryptedContent.split('\n');
                const dataLine = lines.find(line => !line.startsWith('#') && line.trim());
                if (!dataLine) return null;
                
                // åè½¬å­—ç¬¦ç§»ä½
                const unscrambled = dataLine.split('').map(char => 
                    String.fromCharCode(char.charCodeAt(0) - 3)
                ).join('');
                
                // Base64è§£ç 
                const decoded = atob(unscrambled);
                return decoded;
            } catch (e) {
                console.error('è§£å¯†å¤±è´¥:', e);
                return null;
            }
        }
        
        // åŠ è½½å†…éƒ¨é…ç½®
        async function loadInternalConfig() {
            try {
                const response = await fetch('./resources/key.txt');
                const encryptedContent = await response.text();
                const config = decryptConfig(encryptedContent);
                
                if (config) {
                    // è§£æé…ç½®ä¿¡æ¯
                    const lines = config.split('\n').filter(line => line.trim());
                    const endpoints = {};
                    
                    for (let i = 0; i < lines.length; i += 3) {
                        if (i + 2 < lines.length) {
                            const modelName = lines[i].trim();
                            const endpoint = lines[i + 1].trim();
                            const key = lines[i + 2].trim();
                            
                            endpoints[modelName] = { endpoint, key };
                        }
                    }
                    
                    return endpoints;
                }
            } catch (e) {
                console.log('æœªæ‰¾åˆ°å†…éƒ¨é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨æ‰‹åŠ¨é…ç½®æ¨¡å¼');
            }
            return null;
        }
        
        // GPTæ¨¡å‹è°ƒç”¨ (ä½¿ç”¨å†…éƒ¨é…ç½®)
        async function callGPTModels(prompt, model) {
            // åŠ è½½å†…éƒ¨é…ç½®
            const internalConfig = await loadInternalConfig();
            if (!internalConfig || !internalConfig[model]) {
                throw new Error(`æœªæ‰¾åˆ°æ¨¡å‹ ${model} çš„é…ç½®ä¿¡æ¯`);
            }
            
            const { endpoint: customEndpoint, key: finalApiKey } = internalConfig[model];
            const modelConfig = modelConfigs[model];
            
            console.log('ä½¿ç”¨å†…éƒ¨é…ç½®:', model);
            
            // æ„å»ºAzure OpenAIå…¼å®¹çš„è¯·æ±‚ä½“
            const requestBody = {
                messages: [{
                    role: 'user',
                    content: prompt
                }],
                temperature: 0.7,
                max_tokens: modelConfig?.maxTokens || 2000,
                stream: false
            };
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯Azure OpenAIæ ¼å¼çš„ç«¯ç‚¹
            const isAzureEndpoint = customEndpoint.includes('openai.azure.com');
            
            let headers = {
                'Content-Type': 'application/json',
                'User-Agent': 'User-Interest-Intelligence/1.0',
                'X-Request-Source': 'user-behavior-analysis'
            };
            
            // æ ¹æ®ç«¯ç‚¹ç±»å‹è®¾ç½®è®¤è¯å¤´
            if (isAzureEndpoint) {
                headers['api-key'] = finalApiKey;
            } else {
                headers['Authorization'] = `Bearer ${finalApiKey}`;
            }
            
            // å¯¹äºéAzureç«¯ç‚¹ï¼Œæ·»åŠ modelå‚æ•°
            if (!isAzureEndpoint) {
                requestBody.model = model;
            }
            
            try {
                const response = await fetch(customEndpoint, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify(requestBody)
                });
                
                if (!response.ok) {
                    const errorText = await response.text();
                    let errorMessage;
                    try {
                        const errorJson = JSON.parse(errorText);
                        errorMessage = errorJson.error?.message || errorJson.message || errorText;
                    } catch {
                        errorMessage = errorText;
                    }
                    throw new Error(`APIè°ƒç”¨é”™è¯¯ (${response.status}): ${errorMessage}`);
                }
                
                const data = await response.json();
                
                // å°è¯•ä¸åŒçš„å“åº”æ ¼å¼
                let result;
                if (data.choices && data.choices[0]) {
                    // OpenAI/Azure OpenAIæ ¼å¼
                    if (data.choices[0].message) {
                        result = data.choices[0].message.content;
                    } else if (data.choices[0].text) {
                        result = data.choices[0].text;
                    }
                } else if (data.content && data.content[0] && data.content[0].text) {
                    // Claudeæ ¼å¼
                    result = data.content[0].text;
                } else if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    // Geminiæ ¼å¼
                    result = data.candidates[0].content.parts[0].text;
                } else if (data.response) {
                    // ç®€å•æ ¼å¼
                    result = data.response;
                } else {
                    throw new Error('æ— æ³•è§£æAPIå“åº”æ ¼å¼: ' + JSON.stringify(data));
                }
                
                if (!result) {
                    throw new Error('APIè¿”å›äº†ç©ºçš„å“åº”å†…å®¹');
                }
                
                try {
                    return JSON.parse(result);
                } catch (e) {
                    console.error('JSONè§£æé”™è¯¯:', e);
                    console.error('åŸå§‹å“åº”:', result);
                    throw new Error('APIè¿”å›çš„ä¸æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼ï¼Œè¯·æ£€æŸ¥æ¨¡å‹é…ç½®');
                }
            } catch (error) {
                console.error('APIè°ƒç”¨è¯¦ç»†é”™è¯¯:', error);
                throw error;
            }
        }

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            console.log('é¡µé¢DOMåŠ è½½å®Œæˆ');
            
            // æ£€æŸ¥å…³é”®å…ƒç´ æ˜¯å¦å­˜åœ¨
            const userSelect = document.getElementById('userSelect');
            const getUserBtn = document.getElementById('getUserBehaviorBtn');
            
            console.log('userSelectå…ƒç´ :', userSelect ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');
            console.log('getUserBehaviorBtnå…ƒç´ :', getUserBtn ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');
            
            if (getUserBtn) {
                console.log('åˆå§‹æŒ‰é’®çŠ¶æ€:', getUserBtn.disabled ? 'ç¦ç”¨' : 'å¯ç”¨');
                
                // æ·»åŠ ç›´æ¥ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ
                getUserBtn.addEventListener('click', function(e) {
                    console.log('æŒ‰é’®è¢«ç‚¹å‡»äº†');
                    if (this.disabled) {
                        console.log('æŒ‰é’®è¢«ç¦ç”¨ï¼Œé˜»æ­¢æ‰§è¡Œ');
                        e.preventDefault();
                        return false;
                    }
                    console.log('æŒ‰é’®ç‚¹å‡»äº‹ä»¶æ­£å¸¸');
                });
            }
            
            // è®¾ç½®æ–‡æœ¬åŸŸä¸ºåªè¯»
            const userData = document.getElementById('userData');
            const promptData = document.getElementById('promptData');
            if (userData) userData.readOnly = true;
            if (promptData) promptData.readOnly = true;
            
            console.log('é¡µé¢åˆå§‹åŒ–å®Œæˆ');
        });
    </script>
</body>
</html>