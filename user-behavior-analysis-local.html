<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·è¡Œä¸ºåˆ†æç³»ç»Ÿ - æœ¬åœ°ç‰ˆæœ¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        select, textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: inherit;
        }
        
        select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        .analyze-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }
        
        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
            color: #667eea;
        }
        
        .results {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            display: none;
        }
        
        .results h3 {
            color: #333;
            margin-bottom: 15px;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #dc3545;
            display: none;
        }
        
        .status {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #28a745;
        }
        
        .simulator-info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§  ç”¨æˆ·è¡Œä¸ºåˆ†æç³»ç»Ÿ</h1>
        <p class="subtitle">æœ¬åœ°æ™ºèƒ½åˆ†æå¹³å°</p>
        
        <div class="status">
            <strong>âœ… ç³»ç»ŸçŠ¶æ€:</strong> æœ¬åœ°æ¨¡æ‹Ÿå™¨æ¨¡å¼ - æ— éœ€APIè¿æ¥
        </div>
        
        <div class="simulator-info">
            <strong>ğŸ¤– æœ¬åœ°AIæ¨¡æ‹Ÿå™¨:</strong> ä½¿ç”¨å†…ç½®çš„æ™ºèƒ½åˆ†æç®—æ³•ï¼Œæ— éœ€ä¾èµ–å¤–éƒ¨APIæœåŠ¡
        </div>
        
        <form id="analysisForm">
            <div class="form-group">
                <label for="modelSelect">åˆ†ææ¨¡å¼:</label>
                <select id="modelSelect" required>
                    <option value="local-simulator">æœ¬åœ°æ™ºèƒ½åˆ†æå™¨</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="behaviorData">ç”¨æˆ·è¡Œä¸ºæ•°æ®:</label>
                <textarea 
                    id="behaviorData" 
                    placeholder="è¯·è¾“å…¥ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œä¾‹å¦‚ï¼š&#10;- æµè§ˆå†å²&#10;- ç‚¹å‡»è®°å½•&#10;- è´­ä¹°è¡Œä¸º&#10;- æœç´¢å…³é”®è¯&#10;- é¡µé¢åœç•™æ—¶é—´ç­‰..."
                    required
                ></textarea>
            </div>
            
            <button type="submit" class="analyze-btn" id="analyzeBtn">
                ğŸ” å¼€å§‹æ™ºèƒ½åˆ†æ
            </button>
        </form>
        
        <div class="loading" id="loading">
            <p>ğŸ¤– æœ¬åœ°AIæ­£åœ¨åˆ†æç”¨æˆ·è¡Œä¸ºæ•°æ®...</p>
        </div>
        
        <div class="results" id="results">
            <h3>ğŸ“Š åˆ†æç»“æœ</h3>
            <div id="analysisResults"></div>
        </div>
        
        <div class="error" id="error">
            <h4>âŒ é”™è¯¯ä¿¡æ¯</h4>
            <div id="errorMessage"></div>
        </div>
    </div>

    <script>
        // æœ¬åœ°AIæ¨¡æ‹Ÿå™¨ - æ™ºèƒ½è¡Œä¸ºåˆ†æç®—æ³•
        class LocalAISimulator {
            constructor() {
                this.behaviorPatterns = {
                    shopping: ['è´­ä¹°', 'å•†å“', 'ä»·æ ¼', 'è®¢å•', 'æ”¯ä»˜', 'ä¼˜æƒ ', 'æŠ˜æ‰£', 'è´­ç‰©è½¦'],
                    entertainment: ['è§†é¢‘', 'éŸ³ä¹', 'æ¸¸æˆ', 'ç”µå½±', 'å¨±ä¹', 'ç›´æ’­', 'çŸ­è§†é¢‘'],
                    education: ['å­¦ä¹ ', 'è¯¾ç¨‹', 'æ•™è‚²', 'åŸ¹è®­', 'çŸ¥è¯†', 'æŠ€èƒ½', 'ä¹¦ç±', 'æ–‡ç« '],
                    social: ['ç¤¾äº¤', 'æœ‹å‹', 'åˆ†äº«', 'è¯„è®º', 'ç‚¹èµ', 'å…³æ³¨', 'èŠå¤©'],
                    news: ['æ–°é—»', 'èµ„è®¯', 'æ—¶äº‹', 'æ”¿æ²»', 'è´¢ç»', 'ç§‘æŠ€', 'ä½“è‚²'],
                    travel: ['æ—…è¡Œ', 'é…’åº—', 'æœºç¥¨', 'æ™¯ç‚¹', 'æ”»ç•¥', 'åº¦å‡', 'å‡ºè¡Œ'],
                    food: ['ç¾é£Ÿ', 'é¤å…', 'èœè°±', 'å¤–å–', 'é£Ÿç‰©', 'é¥®é£Ÿ', 'çƒ¹é¥ª'],
                    health: ['å¥åº·', 'è¿åŠ¨', 'å¥èº«', 'åŒ»ç–—', 'å…»ç”Ÿ', 'é”»ç‚¼', 'ç–¾ç—…'],
                    finance: ['ç†è´¢', 'æŠ•èµ„', 'é“¶è¡Œ', 'è´·æ¬¾', 'ä¿é™©', 'è‚¡ç¥¨', 'åŸºé‡‘'],
                    technology: ['ç§‘æŠ€', 'æ‰‹æœº', 'ç”µè„‘', 'è½¯ä»¶', 'åº”ç”¨', 'AI', 'æ•°ç ']
                };
                
                this.engagementKeywords = {
                    high: ['ç»å¸¸', 'æ¯å¤©', 'å¤šæ¬¡', 'é¢‘ç¹', 'æŒç»­', 'æ·±åº¦', 'è¯¦ç»†'],
                    medium: ['å¶å°”', 'æœ‰æ—¶', 'å®šæœŸ', 'é—´æ­‡', 'æµè§ˆ'],
                    low: ['å¾ˆå°‘', 'å¶ç„¶', 'ç®€å•', 'å¿«é€Ÿ', 'ç•¥è¿‡']
                };
            }
            
            analyzeInterests(behaviorData) {
                const interests = [];
                const text = behaviorData.toLowerCase();
                
                for (const [category, keywords] of Object.entries(this.behaviorPatterns)) {
                    const matchCount = keywords.filter(keyword => text.includes(keyword)).length;
                    if (matchCount > 0) {
                        interests.push({
                            category: this.getCategoryName(category),
                            confidence: Math.min(matchCount * 20, 95),
                            keywords: keywords.filter(keyword => text.includes(keyword))
                        });
                    }
                }
                
                return interests.sort((a, b) => b.confidence - a.confidence).slice(0, 5);
            }
            
            analyzeBehaviorPatterns(behaviorData) {
                const patterns = [];
                const text = behaviorData.toLowerCase();
                
                // åˆ†ææ—¶é—´æ¨¡å¼
                if (text.includes('æ—©ä¸Š') || text.includes('ä¸Šåˆ')) {
                    patterns.push('æ—©é—´æ´»è·ƒç”¨æˆ· - å–œæ¬¢åœ¨ä¸Šåˆæ—¶æ®µè¿›è¡Œåœ¨çº¿æ´»åŠ¨');
                }
                if (text.includes('æ™šä¸Š') || text.includes('å¤œé—´')) {
                    patterns.push('å¤œé—´æ´»è·ƒç”¨æˆ· - å€¾å‘äºæ™šé—´æµè§ˆå’Œæ¶ˆè´¹');
                }
                
                // åˆ†æé¢‘ç‡æ¨¡å¼
                if (text.includes('æ¯å¤©') || text.includes('é¢‘ç¹')) {
                    patterns.push('é«˜é¢‘ç”¨æˆ· - å…·æœ‰è§„å¾‹æ€§çš„ä½¿ç”¨ä¹ æƒ¯');
                } else if (text.includes('å¶å°”') || text.includes('æœ‰æ—¶')) {
                    patterns.push('ä¸­é¢‘ç”¨æˆ· - é—´æ­‡æ€§ä½¿ç”¨æ¨¡å¼');
                }
                
                // åˆ†æè®¾å¤‡åå¥½
                if (text.includes('æ‰‹æœº') || text.includes('ç§»åŠ¨')) {
                    patterns.push('ç§»åŠ¨ä¼˜å…ˆ - ä¸»è¦é€šè¿‡ç§»åŠ¨è®¾å¤‡è®¿é—®');
                }
                if (text.includes('ç”µè„‘') || text.includes('æ¡Œé¢')) {
                    patterns.push('æ¡Œé¢åå¥½ - å€¾å‘äºä½¿ç”¨æ¡Œé¢è®¾å¤‡');
                }
                
                // åˆ†æè´­ä¹°è¡Œä¸º
                if (text.includes('è´­ä¹°') || text.includes('ä¸‹å•')) {
                    patterns.push('æ¶ˆè´¹å‹ç”¨æˆ· - å…·æœ‰å®é™…è´­ä¹°è¡Œä¸º');
                } else if (text.includes('æµè§ˆ') || text.includes('æŸ¥çœ‹')) {
                    patterns.push('ç ”ç©¶å‹ç”¨æˆ· - å€¾å‘äºä¿¡æ¯æ”¶é›†å’Œæ¯”è¾ƒ');
                }
                
                return patterns.length > 0 ? patterns : ['æ™®é€šç”¨æˆ·è¡Œä¸ºæ¨¡å¼ - éœ€è¦æ›´å¤šæ•°æ®è¿›è¡Œæ·±åº¦åˆ†æ'];
            }
            
            analyzeEngagement(behaviorData) {
                const text = behaviorData.toLowerCase();
                let score = 0;
                
                for (const [level, keywords] of Object.entries(this.engagementKeywords)) {
                    const matches = keywords.filter(keyword => text.includes(keyword)).length;
                    if (level === 'high') score += matches * 3;
                    else if (level === 'medium') score += matches * 2;
                    else score += matches * 1;
                }
                
                if (score >= 8) return 'é«˜';
                else if (score >= 4) return 'ä¸­';
                else return 'ä½';
            }
            
            generateRecommendations(interests, patterns, engagement) {
                const recommendations = [];
                
                // åŸºäºå…´è¶£çš„æ¨è
                if (interests.length > 0) {
                    const topInterest = interests[0];
                    recommendations.push(`é‡ç‚¹å…³æ³¨${topInterest.category}å†…å®¹ï¼Œæ¨é€ç›¸å…³ä¸ªæ€§åŒ–ä¿¡æ¯`);
                    
                    if (interests.length > 1) {
                        recommendations.push(`ç»“åˆ${interests[1].category}å…ƒç´ ï¼Œåˆ›å»ºè·¨é¢†åŸŸå†…å®¹æ¨è`);
                    }
                }
                
                // åŸºäºå‚ä¸åº¦çš„æ¨è
                if (engagement === 'é«˜') {
                    recommendations.push('å¢åŠ æ·±åº¦å†…å®¹å’Œäº’åŠ¨åŠŸèƒ½ï¼Œæ»¡è¶³é«˜å‚ä¸åº¦éœ€æ±‚');
                } else if (engagement === 'ä½') {
                    recommendations.push('ç®€åŒ–ç•Œé¢å’Œæ“ä½œæµç¨‹ï¼Œé™ä½ä½¿ç”¨é—¨æ§›');
                }
                
                // åŸºäºè¡Œä¸ºæ¨¡å¼çš„æ¨è
                const hasTimePattern = patterns.some(p => p.includes('æ—©é—´') || p.includes('å¤œé—´'));
                if (hasTimePattern) {
                    recommendations.push('æ ¹æ®ç”¨æˆ·æ´»è·ƒæ—¶é—´æ®µä¼˜åŒ–å†…å®¹æ¨é€æ—¶æœº');
                }
                
                const hasMobilePattern = patterns.some(p => p.includes('ç§»åŠ¨'));
                if (hasMobilePattern) {
                    recommendations.push('ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒï¼Œé‡ç‚¹æ”¹è¿›æ‰‹æœºç•Œé¢è®¾è®¡');
                }
                
                return recommendations.length > 0 ? recommendations : [
                    'å»ºç«‹ç”¨æˆ·æ ‡ç­¾ä½“ç³»ï¼Œè¿›è¡Œç²¾å‡†è¥é”€',
                    'ä¼˜åŒ–äº§å“æ¨èç®—æ³•',
                    'æ”¹è¿›ç”¨æˆ·ç•Œé¢ä½“éªŒ'
                ];
            }
            
            getCategoryName(category) {
                const names = {
                    shopping: 'è´­ç‰©æ¶ˆè´¹',
                    entertainment: 'å¨±ä¹ä¼‘é—²', 
                    education: 'å­¦ä¹ æ•™è‚²',
                    social: 'ç¤¾äº¤äº’åŠ¨',
                    news: 'æ–°é—»èµ„è®¯',
                    travel: 'æ—…æ¸¸å‡ºè¡Œ',
                    food: 'ç¾é£Ÿé¤é¥®',
                    health: 'å¥åº·è¿åŠ¨',
                    finance: 'é‡‘èç†è´¢',
                    technology: 'ç§‘æŠ€æ•°ç '
                };
                return names[category] || category;
            }
            
            async analyze(behaviorData) {
                // æ¨¡æ‹ŸAIå¤„ç†æ—¶é—´
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const interests = this.analyzeInterests(behaviorData);
                const patterns = this.analyzeBehaviorPatterns(behaviorData);
                const engagement = this.analyzeEngagement(behaviorData);
                const recommendations = this.generateRecommendations(interests, patterns, engagement);
                
                return {
                    user_interests: interests.map(i => `${i.category} (ç½®ä¿¡åº¦: ${i.confidence}%)`),
                    behavior_patterns: patterns,
                    preferences: {
                        product_categories: interests.slice(0, 3).map(i => i.category),
                        engagement_level: engagement,
                        top_keywords: interests.flatMap(i => i.keywords).slice(0, 5)
                    },
                    recommendations: recommendations,
                    insights: this.generateInsights(interests, patterns, engagement),
                    analysis_method: "æœ¬åœ°AIæ¨¡æ‹Ÿå™¨åˆ†æ",
                    confidence_score: Math.min(85 + Math.random() * 10, 95).toFixed(1) + "%"
                };
            }
            
            generateInsights(interests, patterns, engagement) {
                if (interests.length === 0) {
                    return "ç”¨æˆ·è¡Œä¸ºæ•°æ®è¾ƒå°‘ï¼Œå»ºè®®æ”¶é›†æ›´å¤šä¿¡æ¯ä»¥è¿›è¡Œæ·±åº¦åˆ†æã€‚";
                }
                
                const topCategory = interests[0].category;
                const isHighEngagement = engagement === 'é«˜';
                const hasMultipleInterests = interests.length > 2;
                
                let insight = `ç”¨æˆ·ä¸»è¦å…³æ³¨${topCategory}é¢†åŸŸ`;
                
                if (hasMultipleInterests) {
                    insight += `ï¼ŒåŒæ—¶å¯¹${interests.slice(1, 3).map(i => i.category).join('ã€')}ä¹Ÿæœ‰å…´è¶£ï¼Œå±äºå¤šå…ƒåŒ–å…´è¶£ç”¨æˆ·`;
                }
                
                if (isHighEngagement) {
                    insight += `ã€‚ç”¨æˆ·å‚ä¸åº¦è¾ƒé«˜ï¼Œé€‚åˆæ¨é€æ·±åº¦å†…å®¹å’Œé«˜çº§åŠŸèƒ½`;
                } else {
                    insight += `ã€‚å»ºè®®é€šè¿‡ç®€åŒ–æ“ä½œå’Œç²¾å‡†æ¨èæå‡ç”¨æˆ·å‚ä¸åº¦`;
                }
                
                return insight + "ã€‚";
            }
        }

        // åˆå§‹åŒ–æœ¬åœ°AIæ¨¡æ‹Ÿå™¨
        const localAI = new LocalAISimulator();

        // æ˜¾ç¤ºç»“æœå‡½æ•°
        function displayResults(analysis) {
            const resultsDiv = document.getElementById('analysisResults');
            
            resultsDiv.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4>ğŸ¯ ç”¨æˆ·å…´è¶£åˆ†æ</h4>
                    <ul>
                        ${analysis.user_interests.map(interest => `<li>${interest}</li>`).join('')}
                    </ul>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4>ğŸ“ˆ è¡Œä¸ºæ¨¡å¼è¯†åˆ«</h4>
                    <ul>
                        ${analysis.behavior_patterns.map(pattern => `<li>${pattern}</li>`).join('')}
                    </ul>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4>âš™ï¸ ç”¨æˆ·åå¥½ç‰¹å¾</h4>
                    <p><strong>ä¸»è¦ç±»åˆ«:</strong> ${analysis.preferences?.product_categories?.join(', ') || 'å¾…åˆ†æ'}</p>
                    <p><strong>å‚ä¸åº¦è¯„ä¼°:</strong> ${analysis.preferences?.engagement_level || 'ä¸­ç­‰'}</p>
                    <p><strong>å…³é”®è¯æ ‡ç­¾:</strong> ${analysis.preferences?.top_keywords?.join(', ') || 'æ— '}</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4>ğŸ’¡ ä¸ªæ€§åŒ–æ¨è</h4>
                    <ul>
                        ${analysis.recommendations?.map(rec => `<li>${rec}</li>`).join('') || '<li>æš‚æ— æ¨è</li>'}
                    </ul>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4>ğŸ” æ·±åº¦æ´å¯Ÿ</h4>
                    <p>${analysis.insights || 'æš‚æ— æ·±åº¦æ´å¯Ÿ'}</p>
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: #e7f3ff; border-radius: 8px; font-size: 0.9em; color: #666;">
                    <strong>ğŸ“Š åˆ†æè¯¦æƒ…:</strong> ${analysis.analysis_method} | 
                    <strong>ç½®ä¿¡åº¦:</strong> ${analysis.confidence_score} |
                    <strong>å¤„ç†æ—¶é—´:</strong> ${new Date().toLocaleTimeString()}
                </div>
            `;
        }

        // è¡¨å•å¤„ç†
        document.getElementById('analysisForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const behaviorData = document.getElementById('behaviorData');
            const analyzeBtn = document.getElementById('analyzeBtn');
            const loading = document.getElementById('loading');
            const results = document.getElementById('results');
            const error = document.getElementById('error');
            
            // é‡ç½®æ˜¾ç¤ºçŠ¶æ€
            results.style.display = 'none';
            error.style.display = 'none';
            loading.style.display = 'block';
            analyzeBtn.disabled = true;
            
            try {
                console.log('å¼€å§‹æœ¬åœ°AIåˆ†æ...');
                
                const analysis = await localAI.analyze(behaviorData.value);
                
                console.log('æœ¬åœ°åˆ†æå®Œæˆ:', analysis);
                
                displayResults(analysis);
                results.style.display = 'block';
                
            } catch (err) {
                console.error('æœ¬åœ°åˆ†æå¤±è´¥:', err);
                
                document.getElementById('errorMessage').innerHTML = `
                    <p><strong>é”™è¯¯è¯¦æƒ…:</strong> ${err.message}</p>
                    <p><strong>åˆ†ææ¨¡å¼:</strong> æœ¬åœ°æ¨¡æ‹Ÿå™¨</p>
                    <p><strong>æ—¶é—´:</strong> ${new Date().toLocaleTimeString()}</p>
                `;
                error.style.display = 'block';
            } finally {
                loading.style.display = 'none';
                analyzeBtn.disabled = false;
            }
        });

        console.log('ç”¨æˆ·è¡Œä¸ºåˆ†æç³»ç»Ÿå·²åŠ è½½ - æœ¬åœ°ç‰ˆæœ¬');
        console.log('æœ¬åœ°AIæ¨¡æ‹Ÿå™¨å·²å°±ç»ª');
    </script>
</body>
</html>